<form class="form-horizontal storage-props">
	<!-- <div ng-if="!self.checkMDObj()">no info</div> -->
	<div ng-repeat="section in self.sections" ng-if="self.checkMDObj()">
		<div class="heading" ng-if="!self.hideHeader || section=='More Information'">{{section}}</div>
		<div ng-repeat="md in self.fields[section]"
			class="form-group props-group"
			ng-if="section!='More Information' && md.use">
			<label class="col-sm-5">{{md.label}}</label>
			<div class="col-sm-7"
				style="border-left: 1px solid #ddd; padding: 0; display: flex; background: #eee; align-items: center;">
				<div style="flex: 1">
					<input type="text" ng-model="md.value" 
							class="form-control props-value"
							ng-readonly="{{md.readonly}}"
							ng-if="md.type == 'text'"
							ng-blur="self.updateMetaData(md.name, md.value)"
							sp-enter="$event.currentTarget.blur();"
							ng-change="self.checkName(md, '{{md.value}}')"
							title="{{md.value}}">
					
					<input ng-if="md.type == 'wiref'" 
							type="text" ng-model="md.ref"
							class="form-control props-value"
							readonly=""
							sp-enter="">
					<select ng-if="md.type == 'wiselect'"
							class="form-control props-value"
							ng-model="md.value"
							ng-options="item for item in md.selections"
							ng-change="self.onChangeSelect(md.name, md.value)"
							title="{{md.value}}">
					</select>
					<div ng-if="md.type=='rating'" class="quality-field">
						<span ng-repeat="star in [1,2,3,4,5]" 
							ng-click="self.doRating(md, star)"
							ng-class="{highlight: star <= md.value}">
							<i class="fa fa-star"></i>
						</span>
					</div>
					<div ng-if="md.type=='wilink'">
						<span class="{{md.value.icon}}" title="{{md.value.type}}"
								style="vertical-align: middle;margin-left: 2px"></span>
						<input type="text" ng-model="md.value.name"
								class="form-control props-value"
								readonly
								title="{{md.value.name}}"
								style="display: inline; width: 90%">
					</div>
				</div>
				<div ng-if="md.name == 'location'" >
					<i class="fa fa-copy"
						ng-class="{copied: self.locationCopied(md.value)}"
						ng-click="self.copyLocation(md.value)"
						style="padding: 0 5px; cursor: pointer;"
						title="Copy!">
					</i>
				</div>
				<div ng-if="md.type=='wilink'" >
					<i class="fa fa-paste"
						ng-click="self.pasteObject(md, md.name)"
						style="padding: 0 2px; cursor: pointer;"
						title="Paste!">
					</i>
					<i class="fa fa-external-link"
						ng-click="self.visitNode(md)"
						style="padding: 0 2px; cursor: pointer;"
						title="Go!">
					</i>
					<i class="fa fa-remove"
						ng-click="self.clearObject(md)"
						style="padding: 0 2px; cursor: pointer;"
						title="Clear!">
					</i>
				</div>
			</div>
		</div>
		<div class="form-group props-group more-info"
			ng-if="section=='More Information'">
			<div ng-repeat="md in self.fields[section]">
				<div class="col-sm-5">
					<input type="text" class="form-control props-value"
							ng-model="md.label"
							ng-blur="self.updateMDName(md.label, md.name, md.value)"
							sp-enter="$event.currentTarget.blur();"
							ng-change="self.warning = ''"
							readonly="">
				</div>
				<div class="col-sm-6"
					style="border-left: 1px solid #ddd;">
					<input type="text" class="form-control props-value"
							ng-model="md.value"
							ng-blur="self.updateMetaData(md.name, md.value)"
							sp-enter="$event.currentTarget.blur();">
				</div>
				<div class="col-sm-1">
					<button type="text" class="btn btn-flat pull-right"
							ng-click="self.removeDataMeta(md.name)"
							style="width: 100%; background: none;">
						<i class="fa fa-close"></i>
					</button>
				</div>
			</div>
			<p>{{self.warning}}</p>
			<button class="btn btn-flat add-mdata" title="Add Meta Data"
					ng-click="self.addMetaData()">
				<i class="fa fa-plus"></i> Add Meta Data
			</button>
		</div>
	</div>
</form>