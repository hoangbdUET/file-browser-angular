<div class='modal fade' data-backdrop="static" data-keyboard="false">
    <div class='modal-dialog'>
        <div class="modal-content" ng-form="form">
            <div class="modal-header">
                <button type="button" class="close" aria-hidden="true" ng-click="self.closeModal()">&times;</button>
                <h4 class="modal-title">New Advanced Search</h4>
            </div>
            <div class="modal-body">
                <div class="form-horizontal advanced-search">
                    <div class="form-group">
                        <label class="col-sm-5">Search in</label>
                        <div class="col-sm-6">
                            <select class="form-control" ng-model="self.searchQuery.type" style="padding:0">
                                <option value="all">All</option>
                                <option value="file">File</option>
                                <option value="folder">Folder</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-5">Sub-folders</label>
                        <div class="col-sm-6">
                            <input type="checkbox" ng-model="self.subFolders">
                        </div>
                    </div>
                    <!-- <div class="col-sm-2">{{self.searchQuery.conditions.operator}}</div>
                    <div class="col-sm-10">
                        <div ng-repeat="child in self.searchQuery.conditions.children">
                            <div class="col-sm-2">{{child.operator}}</div>
                            <div class="col-sm-10" 
                                ng-class="{'selected-item' : self.rowSelected(child)}" 
                                ng-click="self.selectItem(child)">
                                <div ng-repeat="subChild in child.children track by $index">
                                    <div class="form-group">
                                        <label class="col-sm-3">{{self.getKeyObj(subChild)}}</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" ng-model="child.children[$index][self.getKeyObj(subChild)]">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    <div class="btn-area">
                        <span ng-click="self.insertMetaDataKey('name')"
                            ng-class="{'has-item' : self.countMDRow('name')}">
                            Name
                            <p ng-if="self.countMDRow('name')">{{self.countMDRow('name')}}</p>
                        </span>
                        <span ng-click="self.insertMetaDataKey('type')"
                            ng-class="{'has-item' : self.countMDRow('type')}">
                            Type
                            <p ng-if="self.countMDRow('type')">{{self.countMDRow('type')}}</p>
                        </span>
                        <span ng-click="self.insertMetaDataKey('author')"
                            ng-class="{'has-item' : self.countMDRow('author')}">
                            Author
                            <p ng-if="self.countMDRow('author')">{{self.countMDRow('author')}}</p>
                        </span>
                        <span ng-click="self.insertMetaDataKey('uploaded')"
                            ng-class="{'has-item' : self.countMDRow('uploaded')}">
                            Date Uploaded
                            <p ng-if="self.countMDRow('uploaded')">{{self.countMDRow('uploaded')}}</p>
                        </span>
                        <span ng-click="self.insertMetaDataKey('field')"
                            ng-class="{'has-item' : self.countMDRow('field')}">
                            Field
                            <p ng-if="self.countMDRow('field')">{{self.countMDRow('field')}}</p>
                        </span>
                        <span ng-click="self.insertMetaDataKey('well')"
                            ng-class="{'has-item' : self.countMDRow('well')}">
                            Well
                            <p ng-if="self.countMDRow('well')">{{self.countMDRow('well')}}</p>
                        </span>
                        <span ng-click="self.insertMetaDataKey('welltype')"
                            ng-class="{'has-item' : self.countMDRow('welltype')}">
                            Well type
                            <p ng-if="self.countMDRow('welltype')">{{self.countMDRow('welltype')}}</p>
                        </span>
                        <span ng-click="self.insertMetaDataKey('datatype')"
                            ng-class="{'has-item' : self.countMDRow('datatype')}">
                            Data type
                            <p ng-if="self.countMDRow('datatype')">{{self.countMDRow('datatype')}}</p>
                        </span>
                    </div>
                    <div class="data-key-area">
                        <div ng-repeat="md in self.conditions"
                            ng-class="{'selected-item': self.rowSelected(md)}">
                            <div ng-repeat="child in md.children track by $index">
                                <div class="form-group">
                                    <label class="col-sm-2"
                                            ng-if="$index == 0">{{self.getLabel(md)}}</label>
                                    <label class="col-sm-2"
                                            ng-if="$index > 0">&nbsp;</label>
                                    <div class="col-sm-9" style="padding-right: 5px;"
                                        ng-if="md.inputtype != 'date'">
                                        <input type="{{md.inputtype}}" class="form-control"
                                                ng-model="child[self.getKeyObj(child)]">
                                    </div>
                                    <div class="uploaded" ng-if="md.inputtype == 'date'">
                                        <div class="col-sm-4">
                                            <input type="date" class="form-control"
                                                    ng-model="child[self.getKeyObj(child)].from">
                                        </div>
                                        <div class="col-sm-1">To</div>
                                        <div class="col-sm-4">
                                            <input type="date" class="form-control"
                                                    ng-model="child[self.getKeyObj(child)].to">
                                        </div>
                                    </div>
                                    <div class="col-sm-1" style="padding-left: 0; padding-top: 6px;">
                                        <span style="height: 24px" 
                                            ng-click="self.removeMetaData(self.getKeyObj(child), child)">
                                            <i class="fa fa-close"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-default"
                        ng-click="self.applySearch()">
                    <span class="ok-16x16"></span>&nbsp;Apply
                </button>
                <button type="button" class="btn btn-default" ng-click="self.closeModal()">
                    <span class="close-16x16"></span>&nbsp;Cancel
                </button>
            </div>
        </div>
    </div>
</div>